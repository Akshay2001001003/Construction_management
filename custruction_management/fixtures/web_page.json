[
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset=\"utf-8\" />\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\r\n    <title>Page Title</title>\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n    <link rel=\"stylesheet\" type=\"text/css\" media=\"screen\" href=\"main.css\" />\r\n    <style>\r\n        .logo {\r\n            width: 30px;\r\n            height: 30px;\r\n            border-radius: 2px;\r\n        }\r\n        * {\r\n            margin: 0;\r\n            padding: 0;\r\n            box-sizing: border-box;\r\n        }\r\n        body {\r\n            font-family: Verdana, sans-serif;\r\n        }\r\n        .mySlides {\r\n            display: none;\r\n        }\r\n        img {\r\n            vertical-align: middle;\r\n            max-height: 80vh;\r\n        }\r\n        .img {\r\n            height: 30vh;\r\n            width: 100%;\r\n            border-radius: 5px;\r\n        }\r\n        .items-container {\r\n            margin-top: 10px;\r\n            display: flex;\r\n            justify-content: space-around;\r\n            align-items: center;\r\n            flex-wrap: wrap;\r\n        }\r\n        .item-card, .site-card {\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            flex-direction: column;\r\n            border-radius: 5px;\r\n            border: 1px solid #b7afaf;\r\n            background-color: white;\r\n            color: white;\r\n            width: 20vw;\r\n            padding: 5px;\r\n        }\r\n        .item-card:hover {\r\n            transform: scale(1.05);\r\n            box-shadow: 4.0px 8.0px 8.0px hsl(0deg 0% 0% / 0.38);\r\n        }\r\n        .slideshow-container {\r\n            max-width: 80vw;\r\n            position: relative;\r\n            margin: auto;\r\n            padding: 0;\r\n        }\r\n        .text {\r\n            color: #f2f2f2;\r\n            font-size: 15px;\r\n            padding: 8px 12px;\r\n            position: absolute;\r\n            bottom: 8px;\r\n            width: 100%;\r\n            text-align: center;\r\n        }\r\n        .numbertext {\r\n            color: #f2f2f2;\r\n            font-size: 12px;\r\n            padding: 8px 12px;\r\n            position: absolute;\r\n            top: 0;\r\n        }\r\n        .dot {\r\n            height: 15px;\r\n            width: 15px;\r\n            margin: 0 2px;\r\n            background-color: #bbb;\r\n            border-radius: 50%;\r\n            display: inline-block;\r\n            transition: background-color 0.6s ease;\r\n        }\r\n        .active {\r\n            background-color: #717171;\r\n        }\r\n        .fade {\r\n            animation-name: fade;\r\n            animation-duration: 1.5s;\r\n        }\r\n        @keyframes fade {\r\n            from {\r\n                opacity: 0.4;\r\n            }\r\n            to {\r\n                opacity: 1;\r\n            }\r\n        }\r\n        @media only screen and (max-width: 600px) {\r\n            .item-card, .site-card {\r\n                width: 80vw;\r\n            }\r\n            .slideshow-container {\r\n                max-width: 100vw;\r\n            }\r\n            .img {\r\n                height: 20vh;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <header\r\n        style=\"\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            width: 100vw;\r\n            background-color: black;\r\n            color: white;\r\n            height: 40px;\r\n            gap: 10px;\r\n            font-weight: 600;\r\n        \"\r\n    >\r\n        <img\r\n            src=\"https://www.shutterstock.com/image-vector/friendly-builder-helmet-carrying-level-600nw-278129696.jpg\"\r\n            class=\"logo\"\r\n        />\r\n        Sky Builders\r\n    </header>\r\n    <div class=\"slideshow-container\">\r\n        <div class=\"mySlides fade\">\r\n            <img\r\n                src=\"https://www.self-build.co.uk/wp-content/uploads/2019/05/meeting-builder-on-site-2000x1073.jpg\"\r\n                style=\"width: 100%\"\r\n            />\r\n        </div>\r\n\r\n        <div class=\"mySlides fade\">\r\n            <img\r\n                src=\"https://urbanistarchitecture.co.uk/media/pages/blog/hiring-builder-uk/88015994a8-1679668560/01-hiring-a-builder-in-the-uk-1024x.jpg\"\r\n                style=\"width: 100%\"\r\n            />\r\n        </div>\r\n\r\n        <div class=\"mySlides fade\">\r\n            <img\r\n                src=\"https://assets-news.housing.com/news/wp-content/uploads/2020/06/29202723/What-is-a-builder-floor-and-should-you-invest-in-it-FB-1200x700-compressed.jpg\"\r\n                style=\"width: 100%\"\r\n            />\r\n        </div>\r\n    </div>\r\n    <br />\r\n\r\n    <div style=\"text-align: center\">\r\n        <span class=\"dot\"></span>\r\n        <span class=\"dot\"></span>\r\n        <span class=\"dot\"></span>\r\n    </div>\r\n    <h3>Items</h3>\r\n    <div class=\"items-container\">\r\n        {% set items = frappe.get_list(\"Item\", fields=[\"name\", \"description\", \"image\"]) %}\r\n        {% for item in items %}\r\n            <div class=\"item-card\">\r\n                <img src=\"{{ item.image }}\" alt=\"{{ item.name }}\" class=\"img\" />\r\n                <h3 style=\"color:blue\">{{ item.name }}</h3>\r\n                <p>{{ item.description }}</p>\r\n                <button class=\"buyButton\" style=\"border:none;color:white;background-color:black;width:60px;height:30px;border-radius:3px\">Buy Now</button>\r\n                <div class=\"customDialog1\" style=\"display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border: 1px solid black; padding: 20px;\">\r\n                    <h2>Item Details</h2>\r\n                    <h3 style=\"color: blue\">{{ item.name }}</h3>\r\n                    <p>{{ item.description }}</p>\r\n                    <button class=\"closeButton\" style=\"border: none; color: white; background-color: black; width: 60px; height: 30px; border-radius: 3px;\">Confirm</button>\r\n                    <button style=\"color:white;background-color:black;border:none;outline:none\" onclick=\"this.closest('.customDialog1').style.display='none'\">Close</button>\r\n                </div>\r\n            </div>\r\n        {% endfor %}\r\n    </div>\r\n    <h1>Sites</h1>\r\n    {% set sites = frappe.get_list(\"Site\", fields=[\"site_name\", \"location\", \"status\", \"project_manager\"]) %}\r\n    {% for site in sites %}\r\n        <div class=\"site-card\">\r\n            <h3 style=\"color:blue\">{{ site.site_name }}</h3>\r\n            <p>{{ site.location }}</p>\r\n            <div>\r\n                <div>{{ site.site_name }}</div>\r\n                <div>{{ site.project_manager }}</div>\r\n            </div>\r\n            <button id=\"viewButton\" style=\"border: none; color: white; background-color: black; width: 60px; height: 30px; border-radius: 3px;\">View</button>\r\n\r\n            <div id=\"customDialog\" style=\"display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border: 1px solid black; padding: 20px;\">\r\n                <h2>Site Details</h2>\r\n                <h3 style=\"color:blue\">{{ site.site_name }}</h3>\r\n                <p>{{ site.location }}</p>\r\n                <div>{{ site.status }}</div>\r\n                <div>{{ site.project_manager }}</div>\r\n                <button id=\"submitButton\">close</button>\r\n            </div>\r\n        </div>\r\n    {% endfor %}\r\n\r\n    <script>\r\n        let slideIndex = 0;\r\n        showSlides();\r\n\r\n        function showSlides() {\r\n            let i;\r\n            let slides = document.getElementsByClassName(\"mySlides\");\r\n            let dots = document.getElementsByClassName(\"dot\");\r\n            for (i = 0; i < slides.length; i++) {\r\n                slides[i].style.display = \"none\";\r\n            }\r\n            slideIndex++;\r\n            if (slideIndex > slides.length) {\r\n                slideIndex = 1;\r\n            }\r\n            for (i = 0; i < dots.length; i++) {\r\n                dots[i].className = dots[i].className.replace(\" active\", \"\");\r\n            }\r\n            slides[slideIndex - 1].style.display = \"block\";\r\n            dots[slideIndex - 1].className += \" active\";\r\n            setTimeout(showSlides, 2000); // Change image every 2 seconds\r\n        }\r\n\r\n        document.getElementById(\"viewButton\").addEventListener(\"click\", function() {\r\n            document.getElementById(\"customDialog\").style.display = \"block\";\r\n        });\r\n\r\n        document.getElementById(\"submitButton\").addEventListener(\"click\", function() {\r\n            document.getElementById(\"customDialog\").style.display = \"none\";\r\n        });\r\n\r\n        let buyButtons = document.querySelectorAll('.buyButton');\r\n        buyButtons.forEach(function(buyButton, index) {\r\n            buyButton.addEventListener('click', function() {\r\n                document.querySelectorAll('.customDialog1')[index].style.display = 'block';\r\n            });\r\n        });\r\n\r\n        let closeButtons = document.querySelectorAll('.closeButton');\r\n        closeButtons.forEach(function(closeButton) {\r\n            closeButton.addEventListener('click', function() {\r\n                this.closest('.customDialog1').style.display = 'none';\r\n                fetch(\"http://localhost:8000/api/method/custruction_management.custom_api.order.create_sales_order_via_rest_api\", {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                        \"data\": {\r\n                            \"customer\": \"Deep\",\r\n                            \"item_code\": \"CR0001\",\r\n                            \"rate\": 100,\r\n                            \"qty\": 1,\r\n                            \"delivery_date\": \"2024-09-08\"\r\n                        }\r\n                    })\r\n                })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data);\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error:', error);\r\n                });\r\n            });\r\n        });\r\n\r\n        document.querySelector(\".navbar\").style.display = \"none\";\r\n        document.querySelector(\".web-footer\").style.display = \"none\";\r\n    </script>\r\n</body>\r\n</html>\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-11 10:17:50.132595",
  "module": null,
  "name": "sky-builders",
  "page_blocks": [],
  "published": 1,
  "route": "sky-builder",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Sky Builders",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>Worker</title>\r\n</head>\r\n<body>\r\n    {% set user_doc = frappe.get_doc(\"User\", frappe.session.user) %}\r\n    <div>{{user_doc.username}}</div>\r\n    {%set details= frappe.get_doc(\"Worker\",user_doc.username)%}\r\n    <div>\r\n        <div>{{details.worker_name}}</div>\r\n        <div>{{details.role}}</div>\r\n        <div>{{details.conatct_details}}</div>\r\n        <div>{{details.address}}</div>\r\n        <div>{{details.joining_date}}</div>\r\n    </div>\r\n</body>\r\n</html>\r\n\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-07 22:47:08.954854",
  "module": null,
  "name": "worker",
  "page_blocks": [],
  "published": 1,
  "route": "worker",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Worker",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>Login Page</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            height: 100vh;\r\n            background-color: #f0f0f0;\r\n        }\r\n        .login-container {\r\n            background-color: white;\r\n            padding: 20px;\r\n            border-radius: 5px;\r\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n            width: 300px;\r\n        }\r\n        .login-container h2 {\r\n            margin-bottom: 20px;\r\n        }\r\n        .login-container input {\r\n            width: 100%;\r\n            padding: 10px;\r\n            margin-bottom: 10px;\r\n            border: 1px solid #ccc;\r\n            border-radius: 5px;\r\n        }\r\n        .login-container button {\r\n            width: 100%;\r\n            padding: 10px;\r\n            background-color: #007bff;\r\n            color: white;\r\n            border: none;\r\n            border-radius: 5px;\r\n            cursor: pointer;\r\n        }\r\n        .login-container button:hover {\r\n            background-color: #0056b3;\r\n        }\r\n        .error-message {\r\n            color: red;\r\n            margin-bottom: 10px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"login-container\">\r\n        <h2>Login</h2>\r\n        <div id=\"error-message\" class=\"error-message\"></div>\r\n        <input type=\"text\" id=\"username\" placeholder=\"Username\">\r\n        <input type=\"password\" id=\"password\" placeholder=\"Password\">\r\n        <button onclick=\"login()\">Login</button>\r\n    </div>\r\n\r\n    <script>\r\n        function login() {\r\n            const username = document.getElementById('username').value;\r\n            const password = document.getElementById('password').value;\r\n            const errorMessage = document.getElementById('error-message');\r\n\r\n            fetch('http://localhost:8000/api/method/login', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    usr: username,\r\n                    pwd: password\r\n                }),\r\n                credentials: 'include' // This ensures cookies (including session cookies) are sent and received\r\n            })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.message === 'Logged In') {\r\n                    window.location.href = '/sky-builder';\r\n                } else {\r\n                    errorMessage.textContent = 'Invalid username or password';\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.error('Error:', error);\r\n                errorMessage.textContent = 'An error occurred. Please try again.';\r\n            });\r\n        }\r\n    </script>\r\n</body>\r\n</html>\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-10 17:45:43.791059",
  "module": null,
  "name": "login",
  "page_blocks": [],
  "published": 1,
  "route": "login1",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Login",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>Worker Portal</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            margin-top: 50px;\r\n        }\r\n        .search-container {\r\n            margin-bottom: 20px;\r\n        }\r\n        .worker-details, .attendance-records, .wage-logs {\r\n            border: 1px solid #ccc;\r\n            padding: 20px;\r\n            border-radius: 5px;\r\n            width: 300px;\r\n            display: none;\r\n            margin-top: 20px;\r\n        }\r\n        .details-section {\r\n            margin-bottom: 20px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <h1>Worker Portal</h1>\r\n    <div class=\"search-container\">\r\n        <input type=\"text\" id=\"do_name\" placeholder=\"Enter Worker do_name\">\r\n        <button onclick=\"searchWorker()\">Search</button>\r\n    </div>\r\n    <div class=\"worker-details\" id=\"worker-details\">\r\n        <h2>Worker Details</h2>\r\n        <div class=\"details-section\">\r\n            <p><strong>Name:</strong> <span id=\"worker-name\"></span></p>\r\n            <p><strong>Email:</strong> <span id=\"worker-email\"></span></p>\r\n            <p><strong>Role:</strong> <span id=\"worker-role\"></span></p>\r\n        </div>\r\n    </div>\r\n    <div class=\"attendance-records\" id=\"attendance-records\">\r\n        <h2>Attendance Records</h2>\r\n        <ul id=\"attendance-list\"></ul>\r\n    </div>\r\n    <div class=\"wage-logs\" id=\"wage-logs\">\r\n        <h2>Wage Logs</h2>\r\n        <ul id=\"wage-logs-list\"></ul>\r\n    </div>\r\n\r\n    <script>\r\n        function searchWorker() {\r\n            const doName = document.getElementById('do_name').value;\r\n\r\n            fetch(`http://localhost:8000/api/resource/Worker/${doName}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.data) {\r\n                        const workerData = data.data;\r\n                        document.getElementById('worker-name').textContent = workerData.full_name || workerData.name || \"N/A\";\r\n                        document.getElementById('worker-email').textContent = workerData.email || \"N/A\";\r\n                        document.getElementById('worker-role').textContent = workerData.role || \"N/A\";\r\n                        document.getElementById('worker-details').style.display = 'block';\r\n\r\n                        fetchAttendanceRecords(doName);\r\n                        fetchWageLogs(doName);\r\n                    } else {\r\n                        alert('Worker not found');\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error:', error);\r\n                    alert('An error occurred. Please try again.');\r\n                });\r\n        }\r\n\r\n        function fetchAttendanceRecords(workerName) {\r\n            const url = `http://localhost:8000/api/resource/Attendence?filters=${encodeURIComponent('[[\"worker\",\"=\",\"' + workerName + '\"]]')}&fields=${encodeURIComponent('[\"date\",\"check_out\",\"checkin_time\"]')}`;\r\n\r\n            fetch(url)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    const attendanceList = document.getElementById('attendance-list');\r\n                    attendanceList.innerHTML = '';\r\n                    if (data.data && data.data.length > 0) {\r\n                        data.data.forEach(record => {\r\n                            const listItem = document.createElement('li');\r\n                            listItem.textContent = `Date: ${record.date}, CheckIn Time: ${record.checkin_time},Check Out:${record.check_out}`;\r\n                            attendanceList.appendChild(listItem);\r\n                        });\r\n                        document.getElementById('attendance-records').style.display = 'block';\r\n                    } else {\r\n                        const listItem = document.createElement('li');\r\n                        listItem.textContent = 'No attendance records found.';\r\n                        attendanceList.appendChild(listItem);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error:', error);\r\n                    alert('An error occurred while fetching attendance records. Please try again.');\r\n                });\r\n        }\r\n\r\n        function fetchWageLogs(workerName) {\r\n            const url = `http://localhost:8000/api/resource/Wage Log?filters=${encodeURIComponent('[[\"worker\",\"=\",\"' + workerName + '\"]]')}&fields=${encodeURIComponent('[\"date\",\"hour_worked\",\"wage_rate\",\"total_wage\"]')}`;\r\n\r\n            fetch(url)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    const wageLogsList = document.getElementById('wage-logs-list');\r\n                    wageLogsList.innerHTML = '';\r\n                    if (data.data && data.data.length > 0) {\r\n                        data.data.forEach(log => {\r\n                            const listItem = document.createElement('li');\r\n                            listItem.textContent = `Date: ${log.date}, Hours Worked: ${log.hour_worked}, Wage Rate: ${log.wage_rate}, Total Wage: ${log.total_wage}`;\r\n                            wageLogsList.appendChild(listItem);\r\n                        });\r\n                        document.getElementById('wage-logs').style.display = 'block';\r\n                    } else {\r\n                        const listItem = document.createElement('li');\r\n                        listItem.textContent = 'No wage logs found.';\r\n                        wageLogsList.appendChild(listItem);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error:', error);\r\n                    alert('An error occurred while fetching wage logs. Please try again.');\r\n                });\r\n        }\r\n    </script>\r\n</body>\r\n</html>\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-08 00:09:02.315622",
  "module": null,
  "name": "worker-portal",
  "page_blocks": [],
  "published": 1,
  "route": "worker-portal",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Worker Portal",
  "website_sidebar": null
 },
 {
  "breadcrumbs": null,
  "content_type": "HTML",
  "context_script": null,
  "css": null,
  "docstatus": 0,
  "doctype": "Web Page",
  "dynamic_route": 0,
  "dynamic_template": 0,
  "enable_comments": 0,
  "end_date": null,
  "full_width": 1,
  "header": null,
  "insert_style": 0,
  "javascript": null,
  "main_section": null,
  "main_section_html": "<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>Supplier Portal</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            margin-top: 50px;\r\n        }\r\n        .search-container {\r\n            margin-bottom: 20px;\r\n        }\r\n        .supplier-details, .purchase-orders, .purchase-invoices {\r\n            border: 1px solid #ccc;\r\n            padding: 20px;\r\n            border-radius: 5px;\r\n            width: 600px;\r\n            display: none;\r\n            margin-top: 20px;\r\n        }\r\n        .details-section {\r\n            margin-bottom: 20px;\r\n        }\r\n        table {\r\n            width: 100%;\r\n            border-collapse: collapse;\r\n        }\r\n        table, th, td {\r\n            border: 1px solid #ccc;\r\n        }\r\n        th, td {\r\n            padding: 10px;\r\n            text-align: left;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <h1>Supplier Portal</h1>\r\n    <div class=\"search-container\">\r\n        <input type=\"text\" id=\"supplier_name\" placeholder=\"Enter Supplier Name\">\r\n        <button onclick=\"searchSupplier()\">Search</button>\r\n    </div>\r\n    <div class=\"supplier-details\" id=\"supplier-details\">\r\n        <h2>Supplier Details</h2>\r\n        <div class=\"details-section\">\r\n            <p><strong>Name:</strong> <span id=\"supplier-name\"></span></p>\r\n            <p><strong>Country:</strong> <span id=\"supplier-country\"></span></p>\r\n        </div>\r\n    </div>\r\n    <div class=\"purchase-orders\" id=\"purchase-orders\">\r\n        <h2>Purchase Orders</h2>\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Order Confirmation No</th>\r\n                    <th>Date</th>\r\n                    <th>Required By</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody id=\"orders-list\"></tbody>\r\n        </table>\r\n    </div>\r\n    <div class=\"purchase-invoices\" id=\"purchase-invoices\">\r\n        <h2>Purchase Invoices</h2>\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Date</th>\r\n                    <th>Posting Time</th>\r\n                    <th>Due Date</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody id=\"invoices-list\"></tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <script>\r\n        function searchSupplier() {\r\n            const supplierName = document.getElementById('supplier_name').value.trim();\r\n\r\n            if (!supplierName) {\r\n                alert('Please enter a supplier name.');\r\n                return;\r\n            }\r\n\r\n            const supplierUrl = `http://localhost:8000/api/resource/Supplier?filters=${encodeURIComponent('[[\"name\",\"=\",\"' + supplierName + '\"]]')}&fields=${encodeURIComponent('[\"name\", \"country\"]')}`;\r\n\r\n            fetch(supplierUrl)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.data && data.data.length > 0) {\r\n                        const supplierData = data.data[0];\r\n                        document.getElementById('supplier-name').textContent = supplierData.name || \"N/A\";\r\n                        document.getElementById('supplier-country').textContent = supplierData.country || \"N/A\";\r\n                        document.getElementById('supplier-details').style.display = 'block';\r\n\r\n                        fetchPurchaseOrders(supplierName);\r\n                        fetchPurchaseInvoices(supplierName);\r\n                    } else {\r\n                        alert('Supplier not found');\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error:', error);\r\n                    alert('An error occurred while fetching the supplier details. Please try again.');\r\n                });\r\n        }\r\n\r\n        function fetchPurchaseOrders(supplierName) {\r\n            const url = `http://localhost:8000/api/resource/Purchase Order?filters=${encodeURIComponent('[[\"supplier\",\"=\",\"' + supplierName + '\"]]')}&fields=${encodeURIComponent('[\"order_confirmation_no\",\"transaction_date\",\"schedule_date\"]')}`;\r\n\r\n            fetch(url)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    const ordersList = document.getElementById('orders-list');\r\n                    ordersList.innerHTML = '';\r\n                    if (data.data && data.data.length > 0) {\r\n                        data.data.forEach(order => {\r\n                            const row = document.createElement('tr');\r\n                            row.innerHTML = `<td>${order.order_confirmation_no}</td><td>${order.transaction_date}</td><td>${order.schedule_date}</td>`;\r\n                            ordersList.appendChild(row);\r\n                        });\r\n                        document.getElementById('purchase-orders').style.display = 'block';\r\n                    } else {\r\n                        const row = document.createElement('tr');\r\n                        row.innerHTML = '<td colspan=\"3\">No purchase orders found.</td>';\r\n                        ordersList.appendChild(row);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error:', error);\r\n                    alert('An error occurred while fetching purchase orders. Please try again.');\r\n                });\r\n        }\r\n\r\n        function fetchPurchaseInvoices(supplierName) {\r\n            const url = `http://localhost:8000/api/resource/Purchase Invoice?filters=${encodeURIComponent('[[\"supplier\",\"=\",\"' + supplierName + '\"]]')}&fields=${encodeURIComponent('[\"posting_date\",\"posting_time\",\"due_date\"]')}`;\r\n\r\n            fetch(url)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    const invoicesList = document.getElementById('invoices-list');\r\n                    invoicesList.innerHTML = '';\r\n                    if (data.data && data.data.length > 0) {\r\n                        data.data.forEach(invoice => {\r\n                            const row = document.createElement('tr');\r\n                            row.innerHTML = `<td>${invoice.posting_date}</td><td>${invoice.posting_time}</td><td>${invoice.due_date}</td>`;\r\n                            invoicesList.appendChild(row);\r\n                        });\r\n                        document.getElementById('purchase-invoices').style.display = 'block';\r\n                    } else {\r\n                        const row = document.createElement('tr');\r\n                        row.innerHTML = '<td colspan=\"3\">No purchase invoices found.</td>';\r\n                        invoicesList.appendChild(row);\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error:', error);\r\n                    alert('An error occurred while fetching purchase invoices. Please try again.');\r\n                });\r\n        }\r\n    </script>\r\n</body>\r\n</html>\r\n",
  "main_section_md": null,
  "meta_description": null,
  "meta_image": null,
  "meta_title": null,
  "modified": "2024-06-08 15:28:13.936224",
  "module": null,
  "name": "supplier",
  "page_blocks": [],
  "published": 1,
  "route": "supplier",
  "show_sidebar": 0,
  "show_title": 0,
  "slideshow": null,
  "start_date": null,
  "text_align": "Left",
  "title": "Supplier",
  "website_sidebar": null
 }
]